"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const utils_1 = require("@hint/utils");
const is_valid_1 = require("./meta/is-valid");
const debug = utils_1.debug(__filename);
class BabelConfigIsValidHint {
    constructor(context) {
        const invalidJSONFile = (babelConfigInvalid, event) => {
            const { error, resource } = babelConfigInvalid;
            debug(`${event} received`);
            context.report(resource, error.message);
        };
        const invalidExtends = (babelConfigInvalid, event) => {
            const { error, resource, getLocation } = babelConfigInvalid;
            debug(`${event} received`);
            context.report(resource, error.message, { location: getLocation('extends', { at: 'value' }) });
        };
        const invalidSchema = (fetchEnd) => {
            const { groupedErrors, resource } = fetchEnd;
            debug(`'parse::error::babel-config::schema' received`);
            for (let i = 0; i < groupedErrors.length; i++) {
                const groupedError = groupedErrors[i];
                context.report(resource, groupedError.message, { location: groupedError.location });
            }
        };
        context.on('parse::error::babel-config::json', invalidJSONFile);
        context.on('parse::error::babel-config::extends', invalidExtends);
        context.on('parse::error::babel-config::schema', invalidSchema);
    }
}
exports.default = BabelConfigIsValidHint;
BabelConfigIsValidHint.meta = is_valid_1.default;
